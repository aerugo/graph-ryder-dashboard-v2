<div class="panel panel-primary my-panel setting-panel" style="{{settings.style.css}}" ng-show="settings.style.display">
  <div class="panel-heading">
    <span>
    <i class="fa fa-{{settings.style.icon}}"></i> {{settings.style.title}}</span>
    <button type="button" class="pull-right close" ng-click="settings.style.display = false" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  </div>
  <div class="panel-body">
    <div class="advancedSearchBox">
      <span ng-show="searchParams.length < 1 && searchQuery.length === 0" class="search-icon glyphicon glyphicon-search"></span>
      <a ng-href="" ng-show="searchParams.length > 0 || searchQuery.length > 0" ng-click="removeAll()" role="button">
        <span class="remove-all-icon glyphicon glyphicon-trash"></span>
      </a>
      <div ng-click="focus()">
        <div class="search-parameter" ng-repeat="searchParam in searchParams" style="background-color: {{searchParam.color}}">
          <a ng-href="" ng-click="removeSearchParam($index)" role="button">
            <span class="remove glyphicon glyphicon-trash"></span>
          </a>
          <div class="key" data-key="{{searchParam.key}}" ng-click="filter($index, searchParam.label)" >{{searchParam.name}}</div>
        </div>
        <input name="searchbox"
               id="searchBox"
               class="search-parameter-input"
               type="text"
               placeholder="{{placeholder}}"
               uib-typeahead="parameter as parameter.name for parameter in parameters.all | filter:{name:$viewValue} | limitTo:10"
               typeahead-on-select="searchQueryTypeaheadOnSelect($item, $model, $label)"
               ng-change="searchQueryChanged(searchQuery)"
               ng-model="searchQuery" />
      </div>
      <div class="search-parameter-suggestions" ng-show="parameters">
        <!--<span class="title">{{parametersLabel}}:</span>-->
        Actual:
        <span class="search-parameter" ng-repeat="param in parameters.actual">
              {{param.key}} = {{param.value}}
          <a ng-href="" ng-click="removeProp($index)" role="button">
            <span class="remove glyphicon glyphicon-trash"></span>
          </a>
        </span>
        <br>
        Node:
        <span class="search-parameter" ng-repeat="param in parameters.node | orderBy: 'name'"
              data-key="{{param.key}}"
              ng-mousedown="searchQueryTypeaheadOnSelect(param)"
              style="background-color: {{param.color}}" >
              {{param.name}} <i ng-class="{'glyphicon glyphicon-plus': param.allowMultiple}"></i>
            </span>
        <br>
        Link:
        <span class="search-parameter" ng-repeat="param in parameters.link | orderBy: 'name'"
              data-key="{{param.key}}"
              ng-mousedown="searchQueryTypeaheadOnSelect(param)"
              style="background-color: {{param.color}}" >
              {{param.name}} <i ng-class="{'glyphicon glyphicon-plus': param.allowMultiple}"></i>
            </span>
        <br>
        Key:
        <span class="search-parameter" ng-repeat="param in parameters.key | orderBy: 'name'"
              data-key="{{param.key}}"
              ng-mousedown="searchQueryTypeaheadOnSelect(param)"
              style="background-color: {{param.color}}" >
              {{param.name}} <i ng-class="{'glyphicon glyphicon-plus': param.allowMultiple}"></i>
            </span>
        <br>
        Property:
        <span class="search-parameter" ng-repeat="param in parameters.property | orderBy: 'name'"
              data-key="{{param.key}}"
              ng-mousedown="searchQueryTypeaheadOnSelect(param)"
              style="background-color: {{param.color}}" >
              {{param.name}} <i ng-class="{'glyphicon glyphicon-plus': param.allowMultiple}"></i>
            </span>
        <br>
        Value:
        <span class="search-parameter" ng-repeat="param in parameters.value | orderBy: 'name'"
              data-key="{{param.key}}"
              ng-mousedown="searchQueryTypeaheadOnSelect(param)"
              style="background-color: {{param.color}}" >
              {{param.name}} <i ng-class="{'glyphicon glyphicon-plus': param.allowMultiple}"></i>
            </span>
      </div>
      <span class="input-group-btn">
        <button class="btn btn-default" type="button" ng-click="action()">Go!</button>
        <button class="btn btn-default" type="button" ng-click="detach()">Detach !</button>
      </span>
    </div>
    {{searchParams}}
    {{step}}
  </div>
</div>
